%!PS-Adobe-2.0
%%Title: Tri Composite of {7} anti-prisms
%%Creator: PS.py written by marcelteun
%%Pages: 3 1
%%BoundingBox: 0 0 595 842
% %%BoundingBox: -595 -842 1100 1700
%%EndComments
%%BeginProlog
(polygons.eps) run
(fonts.eps) run
polygons begin
  % update this one if you want to scale the facelets. The relative positions
  % should still be okay
  /scaling_size 50 def
  % N.B. if you change this one all positions of the pieces will change
  /org_scaling 50 def
  /gray_value 0.2 def
  /edge_to_edge_offset_mm 1 mm2pt def
  % set if_show_base to true if you want to see the A4 area drawn
  /if_show_a4_area false def
  % set if_show_base to true if you want to see one whole face with vertex numbers
  /if_show_base false def
  % then define the base face number here to decide which one to show:
  /base_face_no 0 def
  /xy_offset {20 40} def
  /local_dict_size 16 def

  /vertices0 [
    [-0.57735026919 1] % 0
    [-0.57735026919 -1] % 1
    [1.154700538379 0] % 2
  ] def
  /faces0 [
    [1 2 0]
  ] def
  /bbox0 [-1.154700538379 -1 0.57735026919 1] def

  /vertices0 vertices0 scaling_size vertices_scale def
  /vs0 vertices0 0.000001 vertices_make_unique def

  /tr vs0 [0 1 2] cv_vertices def

  % Define combined sub parts:
  /tr_0
    tr
    dup 1 vertices_get
    xy_neg vertices_translate
    30 vertices_rotate
  def
  /tr_1
    tr_0 1
    tr 0 2
    vertices_edge_attach_to
  def
  /tr_2
    tr_1 1
    tr 0 2
    vertices_edge_attach_to
  def
  /tr_3
    tr_2 1
    tr 0 2
    vertices_edge_attach_to
  def
  /tr_4
    tr_3 1
    tr 0 2
    vertices_edge_attach_to
  def
  /tr_5
    tr_4 1
    tr 0 2
    vertices_edge_attach_to
  def
  /tr_6
    tr_3 0
    tr 1 0
    vertices_edge_attach_to
  def
  /tr_7
    tr_6 1
    tr 0 2
    vertices_edge_attach_to
  def
  /tr_8
    tr_7 1
    tr 0 2
    vertices_edge_attach_to
  def
  /tr_9
    tr_8 1
    tr 0 2
    vertices_edge_attach_to
  def
  /tr_10
    tr_9 1
    tr 0 2
    vertices_edge_attach_to
  def
  /tr_11
    tr_10 1
    tr 0 2
    vertices_edge_attach_to
  def
  /tr_12
    tr_4 0
    tr 1 0
    vertices_edge_attach_to
  def
  /tr_13
    tr_12 1
    tr 0 2
    vertices_edge_attach_to
  def
  /tr_14
    tr_2 0
    tr 1 0
    vertices_edge_attach_to
  def
  /tr_15
    tr_14 2
    tr 1 0
    vertices_edge_attach_to
  def
  /tr_16
    tr_15 1
    tr 1 0
    vertices_edge_attach_to
  def
  /tr_17
    tr_12 2
    tr 1 0
    vertices_edge_attach_to
  def
  /triangles [
    tr_0 white polygon_create
    tr_1 white polygon_create
    tr_2 white polygon_create
    tr_3 white polygon_create
    tr_4 white polygon_create
    tr_5 white polygon_create
    tr_6 white polygon_create
    tr_7 white polygon_create
    tr_8 white polygon_create
    tr_9 white polygon_create
    tr_10 white polygon_create
    tr_11 white polygon_create
    tr_12 white polygon_create
    tr_13 white polygon_create
    tr_14 white polygon_create
    tr_15 white polygon_create
    tr_16 white polygon_create
    tr_17 white polygon_create
    net_create
  def

  /vertices1 [
    [-0.172235294502 2.298320280934] % 0
    [-1.904286102071 1.298320280934] % 1
    [-2.202370634423 -0.679341371517] % 2
    [-0.842025158881 -2.145445115176] % 3
    [1.152382435481 -1.995984928003] % 4
    [2.279022551608 -0.343507379371] % 5
    [1.689512202787 1.567638232201] % 6
    [-1.904286102071 1.298320280934] % 7
    [-0.842025158881 -2.145445115176] % 8
    [1.152382435481 -1.995984928003] % 9
    [-0.172235294502 2.298320280933] % 10
    [2.279022551608 -0.343507379372] % 11
    [-0.172235294502 2.298320280934] % 12
    [-1.904286102071 1.298320280934] % 13
    [1.152382435481 -1.995984928004] % 14
  ] def
  /faces1 [
    [0 1 2 3 4 5 6][7 8][9 10][11 12][13 14]
  ] def
  /bbox1 [-2.202370634423 -2.145445115176 2.279022551608 2.298320280934] def

  /vertices1 vertices1 scaling_size vertices_scale def
  /vs1 vertices1 0.000001 vertices_make_unique def

  /h_out vs1 [0 5 6] cv_vertices def
  /h_r vs1 [0 4 5] cv_vertices def
  /h_l vs1 [1 3 4] cv_vertices def
  /h_c vs1 [4 0 1] cv_vertices def

  % Define combined sub parts:
  /h_0
    h_c
    dup 1 vertices_get
    xy_neg vertices_translate
    150 vertices_rotate
  def
  /h_1
    h_0 2
    h_l 0 2
    vertices_edge_attach_to
  def
  /h_2
    h_1 0
    h_out 1 0
    vertices_edge_attach_to
  def
  /h_3
    h_0 0
    h_r 1 0
    vertices_edge_attach_to
  def
  /h_4
    h_3 2
    h_out 1 0
    vertices_edge_attach_to
  def
  /heptagon [
    h_0 white polygon_create
    h_1 white polygon_create 0 polygon_reverse_edge
    h_2 white polygon_create 0 polygon_reverse_edge
      1 polygon_reverse_edge
    h_3 white polygon_create 0 polygon_reverse_edge
    h_4 white polygon_create 0 polygon_reverse_edge
      1 polygon_reverse_edge
    net_create
  def

  /a4_area {
    if_show_a4_area {
      0 0 595 842 rectstroke
    } if
  } bind def
  /show_base_face {
    if_show_base {
      gsave
        xy_offset translate
        bbox 0 get scaling_size mul neg
        bbox 1 get scaling_size mul neg
        translate
        faces aload length { %repeat
          dup 0 get
          vertices exch get
          aload pop
          moveto
          aload length 1 sub { %repeat
            vertices exch get
            aload pop
            lineto
          } repeat
          pop
          closepath stroke
        } repeat
        vs vertices_show_nos
      grestore
    } if
  } bind def

  /def_base_face {
    % Choose the right vertices, faces etc for the show_base_face function
    /put_digit { % (abc..) d
      % replace the last character in string (abc..) with the integer 'd'
      % for which should hold 0 <= d <= 9, i.e. d is a digit
      1 index dup length 1 sub  % (abc..) d (abc..) 4
      48 % this is the ASCII code for the character '0'
      4 -1 roll add % (abc..) (abc..) 4 48+d
      put % (abc.d)
    } bind def
    /vertices
      (vertices?) base_face_no put_digit
      cvn load
    def
    /vs (vs?) base_face_no put_digit cvn load def
    /faces (faces?) base_face_no put_digit cvn load def
    /bbox (bbox?) base_face_no put_digit cvn load def
  } bind def

  def_base_face
end
%%EndProlog
[
  /Author (Marcel T"unnissen)
  /Title (Tri Composite of {7} anti-prisms)
  /DOCINFO
pdfmark

%%Page: 1 1
%%BeginPage
polygons begin
  a4_area
  local_dict_size dict begin
    .1 setlinewidth
    /if_show_base true def
    /base_face_no 1 def
    def_base_face
    show_base_face
    25 625 translate
    (For the 3x{7} you will need:) tline
    (  * a total of six heptagons. I suggest using three colours) tline
    (  * a total of 26 equilateral triangles, e.g:) tline
    (      - one at the bottom and one at the top) tline
    (      - three rings of eight triangles, for which you could use alternating colours) tline
    showpage
  end % local dict
end % polygons
%%EndPage

%%Page: 2 2
%%BeginPage
polygons begin
  a4_area
  local_dict_size dict begin
    .1 setlinewidth
    100 50 rel_translate
    heptagon net_cut
    240 0 rel_translate
    heptagon net_cut
  end % local dict
end % polygons

showpage
%%EndPage

%%Page: 3 3
%%BeginPage
polygons begin
  a4_area
  local_dict_size dict begin
    .1 setlinewidth
    90 560 rel_translate
    triangles net_cut
  end % local dict
end % polygons
showpage
%%EndPage

%%Tailer
%%EOF
